<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: integration/logger.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: integration/logger.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

const AbstractLogger = require('../abstract/logger-abstract');

class Logger extends AbstractLogger {
  constructor(process, pretty) {
    super({
      notify: log => {
        if (pretty) {
          process.stdout.write(`${clc.success('LOG')} [${new Date(log.time).toLocaleString()}] - ${this.getString(log.severity)} - ${log.message} - ${JSON.stringify(log.data)}\n`);
        }
        else process.stdout.write('\ntask:log ' + JSON.stringify(log) + '\n');
      }
    });
  }

  getString(severity) {
    return [
      'EMERGENCY',
      'ALERT',
      'CRITICAL',
      'ERROR',
      'WARNING',
      'NOTICE',
      'INFO',
      'DEBUG',
    ][severity]
  }

  /**
   * @method capture
   * @param {WebDriver} device 
   * @param {Boolean} saveLocal 
   */
  capture(device, saveLocal = false) {
    return new Promise((resolve, reject) => {
      let fname = 'img_' + Date.now() + '.png';
      let captureFN = saveLocal
        ? device.saveScreenshot.bind(device, fname)
        : device.takeScreenshot;

      captureFN((error, capture) => {
        if (error) {
          this.error('error', { error });
          reject({ error });
        }
        else {
          this.debug('capture: ' + fname, { capture });
          resolve({ capture });
        }
      })
    })
  }
}

module.exports = Logger;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#capture">capture</a></li><li><a href="global.html#getName">getName</a></li><li><a href="global.html#getVersion">getVersion</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Oct 12 2018 23:45:04 GMT+0200 (Hora de verano romance)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
